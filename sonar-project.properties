# SonarQube/SonarCloud Configuration for clang-tidy-automotive
# This file configures code quality analysis of the project itself

sonar.projectKey=montge_clang-tidy-automotive
sonar.projectName=Clang-Tidy Automotive
sonar.projectVersion=1.0.0

# Organization (for SonarCloud)
sonar.organization=montge

# Source code location
sonar.sources=src/automotive
sonar.sourceEncoding=UTF-8

# Exclude test files and LLVM symlinks from analysis
sonar.exclusions=**/test/**,**/llvm-project-*/**,**/*.md

# C++ specific settings
# Using compile_commands.json instead of build-wrapper-output
# sonar.cfamily.build-wrapper-output=build-wrapper-output
sonar.cfamily.threads=4

# Coverage report location (LCOV format from llvm-cov)
sonar.cfamily.llvm-cov.reportPath=coverage.lcov

# External issues from clang-tidy-automotive analysis
# sonar.externalIssuesReportPaths=sonarqube-issues.json

# Test file locations
sonar.tests=test
sonar.test.inclusions=**/*.c

# Quality gate settings
# The quality gate is configured in SonarCloud UI with these thresholds:
# - Coverage on new code: >= 80%
# - Duplicated lines on new code: <= 3%
# - Maintainability rating on new code: A
# - Reliability rating on new code: A
# - Security rating on new code: A
# - Security hotspots reviewed: 100%
sonar.qualitygate.wait=true

# New code definition (for PR analysis)
# Reference branch is set dynamically in GitHub Actions workflow for gitflow:
#   - feature/* branches use develop as reference
#   - release/* and hotfix/* branches use main as reference
#   - develop branch uses main as reference
# sonar.newCode.referenceBranch is passed via -D in CI workflow

# SCM settings
sonar.scm.provider=git

# Duplicate detection
sonar.cpd.exclusions=**/test/**

# Issue management
sonar.issue.ignore.multicriteria=e1
sonar.issue.ignore.multicriteria.e1.ruleKey=cpp:S995
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.h
